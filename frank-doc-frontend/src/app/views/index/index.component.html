<div class="page-container">
  <div class="sidenav">
    @for (filter of filters(); track filter.name; let index = $index) {
      <div class="filter-name" [collapse]="filterList" (collapsedChange)="collapsedFilters[filter.name] = $event">
        <span>{{ filter.name }} ({{ filter.labels.length }})</span>
        <app-icon-caret
          [width]="18"
          [height]="18"
          [rotation]="collapsedFilters[filter.name] ? 'down' : 'up'"
        ></app-icon-caret>
      </div>
      <ul #filterList>
        @for (label of filter.labels; track label.name) {
          <li class="filter-item" (click)="scrollToElement('#' + filter.name + '-' + label.name)">
            <ff-chip [colour]="getLabelColor(filterColours, index)" slim>{{ label.name.charAt(0) }}</ff-chip>
            {{ label.name }} ({{ label.elements.length }})
          </li>
        }
      </ul>
    }
  </div>
  <div class="page">
    <h2>Index</h2>
    <p class="description">
      Welcome to the index page, here you can find all the groups, categories & elements in one place for your
      convenience. On the left side you can find the all the categories separated by their groups. Click on one to
      automatically scroll down to it. 'Category' and 'Components' are familiar groups to the Frank!Framework community
      while 'EIP' or 'Enterprise Integration Patterns' are more common in the integration (messaging) community. An
      element is likely to fall under multiple groups of categories, meaning they could appear under more than one
      category.
    </p>

    @for (filter of filters(); track filter.name; let index = $index) {
      <div class="filter-container">
        <h3>{{ filter.name }}</h3>
        @for (label of filter.labels; track label.name) {
          <div class="label-container">
            <h4 id="{{ filter.name }}-{{ label.name }}">{{ label.name }}</h4>
            <div class="elements">
              @for (element of label.elements; track $index) {
                <a [routerLink]="['/', filter.name, label.name, element]"
                  ><ff-chip [colour]="getLabelColor(filterColours, index)" slim>{{ label.name.charAt(0) }}</ff-chip>
                  {{ element }}</a
                >
              } @empty {
                <p>No elements found.</p>
              }
            </div>
          </div>
        }
      </div>
    }
  </div>
</div>
@if (showFeedback) {
  <button class="feedback-btn" title="Feedback">
    <app-icon-smile width="32" height="32"></app-icon-smile>
  </button>
}
