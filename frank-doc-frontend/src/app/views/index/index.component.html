<div class="page-container">
  <div class="sidenav fixed-sidenav">
    @for (filterEntry of filters(); track filterEntry.name) {
      <div
        class="nav-group-name"
        [collapse]="filterList"
        (collapsedChange)="collapsedFilters[filterEntry.name] = $event"
      >
        <span>{{ filterEntry.name }} ({{ filterEntry.filter['labels'].length }})</span>
        <app-icon-caret
          [width]="18"
          [height]="18"
          [rotation]="collapsedFilters[filterEntry.name] ? 'down' : 'up'"
        ></app-icon-caret>
      </div>
      <ul #filterList>
        @for (labelEntry of filterEntry.filter['labels']; track labelEntry.key) {
          <li class="nav-item" (click)="appService.scrollToElement('#' + filterEntry.name + '-' + labelEntry.key)">
            <ff-chip [colour]="appService.getLabelColor(filterEntry.name)" slim>{{ labelEntry.key.charAt(0) }}</ff-chip>
            {{ labelEntry.key }} ({{ labelEntry.value.length }})
          </li>
        }
      </ul>
    }
  </div>
  <div class="page">
    <h2 class="page-title">Components</h2>
    <p class="description">
      This is the components index page. Here, you'll find all groups, categories, and components conveniently gathered
      in one place. On the left side, you can browse categories organized by their respective groups. Simply click on a
      category to scroll directly to it.
    </p>
    <p class="description">
      The groups "Category" and "Components" will be familiar to the Frank!Framework community, while "EIP" (Enterprise
      Integration Patterns) are widely recognized in the integration and messaging community. Elements may belong to
      multiple groups or categories, so you might encounter them in more than one category.
    </p>

    @for (filterEntry of filters(); track filterEntry.name) {
      <div class="filter-container">
        <h3 class="sub-title">{{ filterEntry.name }}</h3>
        @for (labelEntries of appService.getLabelEntries(filterEntry.filter); track labelEntries.name) {
          <div class="label-container">
            <h4 id="{{ filterEntry.name }}-{{ labelEntries.name }}">{{ labelEntries.name }}</h4>
            <div class="elements">
              @for (element of labelEntries.labels; track $index) {
                <a [routerLink]="['/', filterEntry.name, labelEntries.name, element]"
                  ><ff-chip [colour]="appService.getLabelColor(filterEntry.name)" slim>{{
                    labelEntries.name.charAt(0)
                  }}</ff-chip>
                  <span
                    [ngClass]="{ deprecated: deprecatedElements().includes(element) }"
                    [innerHTML]="element | nameWbr"
                  ></span
                ></a>
              } @empty {
                <p>No elements found.</p>
              }
            </div>
          </div>
        }
      </div>
    }
  </div>
</div>
